---
import BaseLayout from '../../layouts/BaseLayout.astro';
import Header from '../../components/astro/Header.astro';

export async function getStaticPaths() {
  // Generate static paths for game IDs
  const gameIds = [1, 2, 3, 4, 5, 6];
  return gameIds.map(id => ({ params: { id: id.toString() } }));
}

const { id } = Astro.params;

// Mock game data - in real app this would come from API
const gameData = {
  "1": {
    id: 1,
    homeTeam: "ZSC Lions",
    awayTeam: "HC Davos",
    homeScore: 2,
    awayScore: 1,
    period: "Final",
    league: "NLA",
    homeLogo: "/zsc-lions-logo.png",
    awayLogo: "/hc-davos-logo.png",
    venue: "Swiss Life Arena",
    date: "March 15, 2024",
    time: "19:45",
    status: "finished"
  },
  "2": {
    id: 2,
    homeTeam: "Floorball KÃ¶niz",
    awayTeam: "UHC Alligator Malans",
    homeScore: 0,
    awayScore: 3,
    period: "3rd Period",
    timeRemaining: "05:22",
    league: "NLA",
    homeLogo: "/floorball-k-niz-logo.png",
    awayLogo: "/uhc-alligator-malans-logo.png",
    venue: "Sporthalle KÃ¶niz",
    date: "March 15, 2024",
    time: "20:00",
    status: "live"
  }
};

const game = gameData[id] || gameData["1"];

// Generate team logo placeholder
function getLogoPlaceholder(teamName: string) {
  const initials = teamName.split(' ')
    .map(word => word[0])
    .join('')
    .substring(0, 2)
    .toUpperCase();
  return initials;
}
---

<BaseLayout title={`${game.homeTeam} vs ${game.awayTeam} - Unihockey Live Tracker`}>
  <div class="min-h-screen bg-background">
    <Header />

    <main class="container mx-auto px-4 py-6 max-w-2xl">
      <!-- Game Header -->
      <div class="rounded-lg border bg-card text-card-foreground shadow-sm p-8">
        <!-- League and Status -->
        <div class="flex items-center justify-center space-x-2 mb-6">
          <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-primary text-primary-foreground">
            {game.league}
          </span>
          {game.status === "live" && (
            <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-destructive text-destructive-foreground">
              ðŸ”´ LIVE
            </span>
          )}
        </div>

        <!-- Teams and Score -->
        <div class="text-center space-y-6">
          <!-- Home Team -->
          <div class="flex items-center justify-center space-x-4">
            {game.homeLogo ? (
              <img src={game.homeLogo} alt={game.homeTeam} class="w-12 h-12 rounded-full" />
            ) : (
              <div class="w-12 h-12 rounded-full bg-muted flex items-center justify-center">
                <span class="text-sm font-medium text-muted-foreground">
                  {getLogoPlaceholder(game.homeTeam)}
                </span>
              </div>
            )}
            <div class="text-xl font-bold">{game.homeTeam}</div>
            <div class="text-4xl font-bold text-primary">
              {game.homeScore ?? "-"}
            </div>
          </div>

          <!-- VS -->
          <div class="text-muted-foreground text-sm">vs</div>

          <!-- Away Team -->
          <div class="flex items-center justify-center space-x-4">
            {game.awayLogo ? (
              <img src={game.awayLogo} alt={game.awayTeam} class="w-12 h-12 rounded-full" />
            ) : (
              <div class="w-12 h-12 rounded-full bg-muted flex items-center justify-center">
                <span class="text-sm font-medium text-muted-foreground">
                  {getLogoPlaceholder(game.awayTeam)}
                </span>
              </div>
            )}
            <div class="text-xl font-bold">{game.awayTeam}</div>
            <div class="text-4xl font-bold text-primary">
              {game.awayScore ?? "-"}
            </div>
          </div>
        </div>

        <!-- Game Info -->
        <div class="mt-8 pt-6 border-t border-border">
          <div class="grid grid-cols-2 gap-4 text-center">
            <div>
              <div class="text-sm text-muted-foreground">Venue</div>
              <div class="font-medium">{game.venue}</div>
            </div>
            <div>
              <div class="text-sm text-muted-foreground">Date & Time</div>
              <div class="font-medium">{game.date} â€¢ {game.time}</div>
            </div>
          </div>
          
          {game.status === "live" && game.period && (
            <div class="mt-4 text-center">
              <div class="text-sm text-muted-foreground">Status</div>
              <div class="font-medium">
                {game.period}
                {game.timeRemaining && ` â€¢ ${game.timeRemaining}`}
              </div>
            </div>
          )}
        </div>
      </div>
    </main>
  </div>
</BaseLayout>