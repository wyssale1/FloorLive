# Claude Code Instructions: Migrate v0 UI to Astro.js

## Task Overview
Migrate an existing React/Next.js application (generated by v0) to Astro.js while preserving Tailwind CSS and shadcn/ui components. Convert static parts to Astro components and keep only dynamic parts as React Islands.

## Project Context
- **Project**: FloorLive
- **Source**: v0-generated React/Next.js app with Tailwind + shadcn/ui
- **Target**: Astro.js app with React Islands for dynamic content
- **Design System**: Keep existing Tailwind + shadcn/ui styling

## Migration Strategy

### 1. Analyze Existing Codebase
- Examine the current file structure and identify all components
- Categorize components into:
  - **Static components** (convert to Astro): Headers, footers, game cards, standings tables
  - **Dynamic components** (keep as React Islands): Live updates, real-time data, user interactions
- Document the existing Tailwind classes and shadcn/ui components used

### 2. Initialize Astro Project Structure
Create new Astro project with this structure:
```
src/
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ astro/              # Static Astro components
â”‚   â”‚   â”œâ”€â”€ Layout.astro
â”‚   â”‚   â”œâ”€â”€ GameCard.astro
â”‚   â”‚   â”œâ”€â”€ StandingsTable.astro
â”‚   â”‚   â”œâ”€â”€ Header.astro
â”‚   â”‚   â””â”€â”€ Footer.astro
â”‚   â”œâ”€â”€ react/              # Dynamic React Islands  
â”‚   â”‚   â”œâ”€â”€ LiveUpdater.tsx
â”‚   â”‚   â”œâ”€â”€ GameFilter.tsx
â”‚   â”‚   â”œâ”€â”€ RefreshStatus.tsx
â”‚   â”‚   â””â”€â”€ UserTracker.tsx
â”‚   â””â”€â”€ ui/                 # shadcn/ui components (keep as-is)
â”‚       â”œâ”€â”€ button.tsx
â”‚       â”œâ”€â”€ card.tsx
â”‚       â”œâ”€â”€ table.tsx
â”‚       â””â”€â”€ ... (all existing shadcn components)
â”œâ”€â”€ pages/
â”‚   â”œâ”€â”€ index.astro         # Home page
â”‚   â”œâ”€â”€ games.astro         # Games list
â”‚   â””â”€â”€ standings.astro     # League standings
â”œâ”€â”€ layouts/
â”‚   â””â”€â”€ BaseLayout.astro
â””â”€â”€ styles/
    â””â”€â”€ globals.css
```

### 3. Configuration Setup
Set up Astro with required integrations:

```js
// astro.config.mjs
import { defineConfig } from 'astro/config';
import react from '@astrojs/react';
import tailwind from '@astrojs/tailwind';

export default defineConfig({
  integrations: [
    react(),
    tailwind({
      // Keep existing tailwind config
      applyBaseStyles: false, // Let shadcn handle base styles
    })
  ],
  // Add any existing build settings
});
```

Preserve existing configurations:
- `tailwind.config.js` - Keep exactly as generated by v0
- `components.json` - Keep shadcn/ui configuration
- `package.json` - Merge dependencies (keep shadcn/ui, add Astro)

### 4. Component Migration Rules

#### Convert to Astro (.astro files):
- **Static UI elements**: Headers, footers, navigation
- **Display components**: Game cards, team info, league tables
- **Layout components**: Page layouts, grid systems
- **Text content**: Static text, labels, headings

#### Keep as React Islands (.tsx files):
- **Real-time updates**: Live score updates, game status
- **User interactions**: Filters, search, sorting
- **Dynamic state**: Form inputs, toggle states
- **API calls**: Data fetching and state management

### 5. Specific Migration Tasks

#### A. Layout Migration
Convert the main layout from React to Astro:
```astro
---
// src/layouts/BaseLayout.astro
export interface Props {
  title: string;
  description?: string;
}

const { title, description = "Swiss Unihockey Live Tracker" } = Astro.props;
---

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{title}</title>
    <meta name="description" content={description}>
  </head>
  <body>
    <slot />
  </body>
</html>
```

#### B. Static Component Migration
Convert display components to Astro:
```astro
---
// src/components/astro/GameCard.astro
export interface Props {
  game: {
    homeTeam: string;
    awayTeam: string;
    score?: string;
    status: 'scheduled' | 'live' | 'finished';
    date: string;
  }
}

const { game } = Astro.props;
---

<div class="bg-white rounded-lg shadow-md p-6 border">
  <div class="flex justify-between items-center">
    <div class="text-lg font-semibold">{game.homeTeam}</div>
    <div class="text-sm text-gray-500">vs</div>
    <div class="text-lg font-semibold">{game.awayTeam}</div>
  </div>
  {game.score && (
    <div class="text-center text-2xl font-bold mt-2">{game.score}</div>
  )}
  {game.status === 'live' && (
    <div class="text-center">
      <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800">
        ðŸ”´ LIVE
      </span>
    </div>
  )}
</div>
```

#### C. Dynamic Component as React Islands
Keep interactive components as React with proper client directives:
```tsx
// src/components/react/LiveUpdater.tsx
import { useState, useEffect } from 'react';
import { Card } from '@/components/ui/card';

export function LiveUpdater({ initialData }: { initialData: any }) {
  const [data, setData] = useState(initialData);
  
  useEffect(() => {
    // Server-Sent Events connection
    const eventSource = new EventSource('/api/live-stream.php');
    
    eventSource.onmessage = (event) => {
      const updates = JSON.parse(event.data);
      setData(updates);
    };
    
    return () => eventSource.close();
  }, []);
  
  return (
    <Card className="p-4">
      {/* Dynamic content that updates in real-time */}
      {data.liveGames?.map((game: any) => (
        <div key={game.id} className="flex justify-between">
          <span>{game.homeTeam} vs {game.awayTeam}</span>
          <span className="font-bold">{game.score}</span>
        </div>
      ))}
    </Card>
  );
}
```

#### D. Page Structure Migration
Convert pages to Astro with Islands integration:
```astro
---
// src/pages/index.astro
import BaseLayout from '../layouts/BaseLayout.astro';
import GameCard from '../components/astro/GameCard.astro';
import { LiveUpdater } from '../components/react/LiveUpdater.tsx';

// Server-side data fetching (if available)
// const initialData = await fetch('...');
const mockGames = [
  { homeTeam: "Team A", awayTeam: "Team B", status: "scheduled", date: "2024-01-15" }
];
---

<BaseLayout title="Swiss Unihockey Live Tracker">
  <main class="container mx-auto px-4 py-8">
    <h1 class="text-3xl font-bold mb-8">Live Games</h1>
    
    <!-- Static game cards -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8">
      {mockGames.map((game) => (
        <GameCard game={game} />
      ))}
    </div>
    
    <!-- Dynamic live updater (React Island) -->
    <LiveUpdater client:load initialData={{}} />
  </main>
</BaseLayout>
```

### 6. shadcn/ui Integration

#### Preserve shadcn/ui Setup
- Keep the existing `components/ui/` directory structure
- Maintain `lib/utils.ts` for className utilities
- Ensure all shadcn components work with both Astro and React Islands
- Test that Tailwind classes work correctly across both environments

#### Usage in Astro Components
For shadcn/ui in static Astro components, manually write the equivalent HTML with Tailwind classes:
```astro
<!-- Instead of <Button>, use: -->
<button class="inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2">
  Click me
</button>
```

#### Usage in React Islands
Keep shadcn/ui components as-is in React Islands:
```tsx
import { Button } from '@/components/ui/button';
import { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';

export function InteractiveComponent() {
  return (
    <Card>
      <CardHeader>
        <CardTitle>Dynamic Content</CardTitle>
      </CardHeader>
      <CardContent>
        <Button onClick={handleClick}>Interactive Button</Button>
      </CardContent>
    </Card>
  );
}
```

### 7. Client Directives Strategy

Use appropriate client directives for React Islands:
- `client:load` - For components needed immediately
- `client:idle` - For components that can load when browser is idle
- `client:visible` - For components that should load when they enter viewport
- `client:only="react"` - For components that should never be server-rendered

Example usage:
```astro
<LiveUpdater client:load />              <!-- Critical live updates -->
<GameFilter client:idle />               <!-- Filter controls -->
<StatsChart client:visible />            <!-- Charts below fold -->
<UserPreferences client:only="react" /> <!-- Client-only features -->
```

### 8. Migration Checklist

#### Phase 1: Setup & Structure
- [ ] Initialize new Astro project
- [ ] Copy over existing Tailwind config and shadcn/ui setup
- [ ] Set up proper TypeScript configuration
- [ ] Migrate global styles and CSS variables

#### Phase 2: Component Migration
- [ ] Identify all components and categorize (static vs dynamic)
- [ ] Convert layout components to Astro
- [ ] Convert display components to Astro
- [ ] Keep interactive components as React Islands
- [ ] Test that all shadcn/ui components work correctly

#### Phase 3: Page Migration  
- [ ] Convert all pages to Astro format
- [ ] Integrate React Islands with proper client directives
- [ ] Test responsive design across all screen sizes
- [ ] Verify that all existing functionality works

#### Phase 4: Testing & Optimization
- [ ] Test build process and static generation
- [ ] Verify that Tailwind classes work in both Astro and React components
- [ ] Test that all dynamic features work correctly
- [ ] Check Lighthouse scores for performance improvements

## Expected Outcomes

After migration:
- **Performance**: Faster initial page loads due to static generation
- **SEO**: Better search engine optimization with server-side rendering  
- **Maintenance**: Easier to maintain with clear separation of static/dynamic
- **Scalability**: Better resource usage with selective hydration
- **Design Consistency**: Preserved v0-generated design with Tailwind + shadcn/ui

## Additional Notes

1. **Preserve Existing Styling**: Don't change any Tailwind classes or shadcn/ui components during migration
2. **Test Incrementally**: Test each converted component thoroughly before moving to the next
3. **Maintain Functionality**: Ensure all existing features work exactly as before
4. **Performance Focus**: Use the most appropriate client directive for each React Island
5. **Documentation**: Document any changes or decisions made during migration

Execute this migration step-by-step, testing thoroughly at each stage to ensure the final Astro application maintains all functionality while gaining the performance benefits of the Islands architecture.